<div class="min-h-screen bg-[#0F172A]">
  <main>
    <section class="py-16 sm:py-24 bg-[#0F172A] text-white relative overflow-hidden">
      <div class="container mx-auto px-4 relative">
        <div class="max-w-2xl mx-auto">
          <div class="bg-[#1E293B]/80 backdrop-blur-sm px-6 py-8 border border-yellow-500/20 rounded-xl shadow-[0_0_30px_rgba(234,179,8,0.1)]">
            <h1 class="font-bold text-2xl text-gray-100 mb-2">Create Social Media Post</h1>
            <p class="text-sm text-gray-400 mb-6">Generate an engaging social media post with AI.</p>

            <%= tag.div(flash[:alert], class: "mb-4 text-red-400") if flash[:alert] %>
            <% if @social_media_content.errors.any? %>
              <div class="mb-6 p-4 bg-red-900/20 border border-red-500/30 rounded-lg">
                <h3 class="text-red-400 font-medium mb-2">Please fix the following errors:</h3>
                <ul class="list-disc list-inside text-red-300 space-y-1">
                  <% @social_media_content.errors.full_messages.each do |message| %>
                    <li><%= message %></li>
                  <% end %>
                </ul>
              </div>
            <% end %>

            <%= form_with model: [:app, @social_media_content], class: "space-y-6" do |f| %>
              <!-- Platform  -->
              <div class="flex space-x-4">
                <label class="flex items-center space-x-2 cursor-pointer text-sm text-gray-200">
                  <%= f.radio_button :platform, :linkedin, checked: @social_media_content.platform == "linkedin", class: "accent-blue-500" %>
                  <span>LinkedIn</span>
                </label>

                <label class="flex items-center space-x-2 cursor-pointer text-sm text-gray-200">
                  <%= f.radio_button :platform, :x, checked: @social_media_content.platform == "x", class: "accent-purple-500" %>
                  <span>X</span>
                </label>
              </div>


              <!-- Keyword -->
              <div>
                <%= f.label :keyword, "Keyword", class: "block text-sm font-medium text-gray-300 mb-2" %>
                <%= f.text_field :keyword, required: true, placeholder: "e.g., SaaS growth", class: "block w-full px-4 py-3 rounded-lg bg-[#1E293B]/50 border border-yellow-500/30 text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-500" %>
              </div>

              <!-- CTA URL -->
              <div>
                <%= f.label :cta_url, "CTA URL", class: "block text-sm font-medium text-gray-300 mb-2" %>
                <%= f.url_field :cta_url, required: true, placeholder: "https://yourproduct.com", class: "block w-full px-4 py-3 rounded-lg bg-[#1E293B]/50 border border-yellow-500/30 text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-500" %>
              </div>

              <!-- Prompt Selection -->
              <div>
                <div class="flex items-center justify-between mb-3">
                  <label class="block text-sm font-medium text-gray-300">AI Prompt</label>
                  <%= link_to new_app_prompt_path(target: @social_media_content.platform), 
                      class: "text-sm text-yellow-400 hover:text-yellow-300 transition-colors",
                      data: { turbo_frame: "prompt_form" } do %>
                    <i data-lucide="plus" class="h-4 w-4 inline mr-1"></i>
                    Create New Prompt
                  <% end %>
                </div>

                <!-- Turbo Frame for prompt creation/editing -->
                <%= turbo_frame_tag "prompt_form" do %>
                  <!-- This will be replaced when creating/editing prompts -->
                <% end %>

                <!-- Existing Prompt Selection -->
                <%= turbo_frame_tag "prompt_selection" do %>
                  <% prompts = Current.user.prompts.where(target: @social_media_content.platform) %>
                  <%= render 'prompt_selection', prompts: prompts, form: f, social_media_content: @social_media_content %>
                <% end %>

                <p class="mt-2 text-sm text-gray-400">Choose or create a prompt to customize how AI generates your content. This affects the writing style, tone, and approach.</p>
              </div>

              <!-- AI model -->
              <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">AI Model</label>
                <%= f.select :ai_model, grouped_options_for_select(@model_groups, @social_media_content.ai_model), { include_blank: "Select Model" }, { data: { controller: "choices-select" } } %>
              </div>

              <div class="pt-2">
                <%= f.submit "Generate Post", class: "px-6 py-3 bg-gradient-to-r from-yellow-500 to-red-500 text-white rounded-md font-semibold hover:shadow-lg" %>
                <%= link_to "Cancel", app_social_media_contents_path, class: "px-6 py-4 bg-gray-500/10 border border-gray-500/30 rounded-lg text-gray-300 hover:bg-gray-500/20" %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </section>
  </main>
</div> 